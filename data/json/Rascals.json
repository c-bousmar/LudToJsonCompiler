{
    "define": {
        "TheEnemy": "(- 3 (mover))",
        "Inward": "(> (var \"OriginFromCenter\") (count Steps \"NextTo\" (last To) (centrePoint)))",
        "CanPass": "(or \"Inward\" (= 1 (var \"CaptureFlag\")))",
        "PassOption": "(if <Pass:option> (move Pass) (do (remove (last To)) next:(move Pass)) )",
        "IsOverPowered": "(if \"IsDiamondBoard\" (<= (count Sites in:(sites Around (to) \"NextTo\" if:(is Empty (to)))) (+ #1 (var \"ML\")) ) (<= (count Sites in:(sites Around (to) \"NextTo\" if:(is Empty (to)))) (+ #1 (var \"ML\")) ))",
        "IsBelow": "(< (count Steps \"NextTo\" (last To) (centrePoint)) (count Steps \"NextTo\" (to) (centrePoint)) )",
        "IsAbove": "(> (count Steps \"NextTo\" (last To) (centrePoint)) (count Steps \"NextTo\" (to) (centrePoint)) )",
        "MoveAStep": "(if (\"NewTurn\") (move (from #1) (to (sites Around (from) \"NextTo\" if:(is Empty (to))) (apply (and { (remember Value (from)) (set Var \"ML\" (value Piece at:(from))) (set Var \"OriginFromCenter\" (count Steps \"NextTo\" (from) (centrePoint))) } )))) (move (from (last To)) (to (sites Around (last To) \"NextTo\" if:(and {(is Empty (to)) <Retrace:option>})) )) (then (if (not (no Pieces of:\"TheEnemy\" in:(<Capture:sites>))) (set Var \"CaptureFlag\" 1 (then (remove (<Capture:sites>)) )) (if (and (>= 0 (var \"ML\")) (not (\"CanPass\"))) (remove (last To) at:StartOfTurn) ))))",
        "TakeNextStep": "(set Var \"ML\" (- (var \"ML\") 1) (then (if (<= 0 (var \"ML\")) (remember Value (last To) (then (moveAgain))) )))",
        "Board": "(board (<BoardShape:type>) use:Cell)",
        "BoardDiameter": "(+ 1 (row of:(- (count Cells) 1)))",
        "IsDiamondBoard": "(= (/ (^ \"BoardDiameter\" 2) 2) (- (count Cells) 1))",
        "BoardCorners": "(union {(sites Column 0) (sites Row 0) (sites Column (- (\"BoardDiameter\") 1)) (sites Row (- (\"BoardDiameter\") 1))})",
        "LowestCorners": "(union (sites Row 0) (sites Column 0))",
        "FirstLast": "(sites {0 (- (count Cells) 1)})"
    },
    "game": "\"Rascals\" (players 2) (equipment { (\"Board\") (piece \"Disc\" Each) } ) (rules (start <BoardShape:placements> ) (play (if (\"NewTurn\") (do (set Var \"CaptureFlag\" 0 (then (forEach Piece (set Value at:(from) (count Pieces Mover in:(sites Around (from) \"NextTo\") )) (then (if (< 0 (size Array (values Remembered))) (forget Value All) ))))) next:(\"MoveAStep\" (sites Occupied by:Mover)) (then (\"TakeNextStep\")) ) (or { \"PassOption\" (or { (\"MoveAStep\" (last To)) } (then (\"TakeNextStep\")) ) } ))) (end (if (no Pieces Mover) (result Mover Loss) )",
    "option": {},
    "rulesets": {},
    "metadata": "(info { (description \"Rascals is an abstract variant of the rough-and-tumble game 'King of the Castle' (where a player stands on top of a dirt pile proclaiming 'I am the King of the Castle and you're a dirty rascal' and then tries to push off all comers, with last man stnding is King. A variant of that game uses teams, and it is the variant that 'Rascals' roughly models. The game was inspired by Alek Erickson and Michael Amundsen's game Catapult and piece step counting modified from my own Throngs. Leading to the idea of 'King of the Castle' which then contributed to the mechanics of the game. Originally, the concept was to require all turns to include either a capture (push off), or else end higher on the hill. However Ludii doesn't seem to have a (do .. if Afterwards) on the turn level, and also does not support recursion. Therefore it was instead implemented with the removal of 'Coward' pieces at the end of the turn if the turn did not comply to the original rule. This might in rare circumstanses have tactical value, but the difference is minimal, and it fits well with the theme of the game. The original design also removed all adjacent enemies at each step. But Ludii testing revealed that excluding pieces below the stepping piece added more tactical interest at all stages of the game, while also reducing the branching factor. However play toward the center becomes more of a disadvantage. However, giving the moving pieces power that declines with each step, proved even more interesting, because the moves' effects are more focused and the center is not so disadvantaged. Thus the final rules are that the moving piece's power to remove pieces on a given step, is the number of steps available to it before taking that step. When the step has been made, the player removes any adjacent enemy piece if this power is greater than or equal to the number of spaces surrounding that enemy.\") (rules \"The board is in the form of a hill and whoever occupies the Castle on it's peak is the current 'King of the Castle'. The goal is to push off all the opponent's rascals (pieces) and then become King. To start, the players' rascals are evenly distributed in alternation across the board. Players then take turns moving a friendly rascal in a series of steps to adjacent empty spaces. The number of steps that the rascal can take is limited to no more than the number of friendly rascals next to where it started, including the moving rascal itself. As the rascal moves to each new space, the Capture Rule in effect (see below) is applied to determine which adjacent enemy rascals are thrown off the hill; If the moving rascal does not throw off any rascals, it must finish its move higher up the hill than where it started. Otherwise it is considered a coward and leaves the hill entirely. The complete passing of a turn is not allowed, so sometimes even a King might be forced to be a coward.\") (id \"4209\") (version \"1.3.14\") (classification \"experimental\") (author \"Dale Walton\") (credit \"Dale Walton\") (date \"19-01-2024\") } ) (graphics { (player Colour P1 (colour White)) (player Colour P2 (colour DarkBlue)) (region Colour (expand origin:(centrePoint) steps:9 \"NextTo\") (colour 130 170 245)) (region Colour (expand origin:(centrePoint) steps:8 \"NextTo\") (colour 160 195 250)) (region Colour (expand origin:(centrePoint) steps:7 \"NextTo\") (colour 190 220 255)) (region Colour (expand origin:(centrePoint) steps:6 \"NextTo\") (colour 255 250 150)) (region Colour (expand origin:(centrePoint) steps:5 \"NextTo\") (colour 230 240 120)) (region Colour (expand origin:(centrePoint) steps:4 \"NextTo\") (colour 195 230 90)) (region Colour (expand origin:(centrePoint) steps:3 \"NextTo\") (colour 160 220 60)) (region Colour (expand origin:(centrePoint) steps:2 \"NextTo\") (colour 125 210 30)) (region Colour (expand origin:(centrePoint) \"NextTo\") (colour 90 200 0)) (region Colour (sites {(centrePoint)}) (colour HumanLight)) (board Colour OuterEdges (colour DarkGrey)) (board Colour InnerEdges (colour White)) (board StyleThickness OuterEdges 2.7) (board StyleThickness InnerEdges 1.2) })"
}